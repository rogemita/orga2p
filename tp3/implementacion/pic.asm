BITS 32

section .text

pic_reset:
	pushf
	pusha
	mov	al, 0x11
	out	0x20, al
	;outb 0x20, 0x11
	mov	al, 0x20
	out	0x21, al
	;outb 0x21, 0x20
	mov	al, 0x04
	out	0x21, al
	;outb 0x21, 0x04
	mov	al, 0x01
	out	0x21, al
	;outb 0x21, 0x01
	mov	al, 0xFF
	out	0x21, al
	;outb 0x21, 0xFF
	mov	al, 0x11
	out	0xA0, al
	;outb 0xA0, 0x11
	mov	al, 0x28
	out	0xA1, al
	;outb 0xA1, 0x28
	mov	al, 0x02
	out	0xA1, al
	;outb 0xA1, 0x02
	mov	al, 0x01
	out	0xA1, al
	;outb 0xA1, 0x01
	mov	al, 0xFF
	out	0xA1, al
	;outb 0xA1, 0xFF
	popa
	popf
	ret

pic_enable:
	pushf
	pusha
	mov	al, 0x00
	out	0x21, al
    ;outb 0x21, 0x00
	mov	al, 0x00
	out	0xA1, al
    ;outb 0xA1, 0x00
	popa
	popf
	ret
